<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Context Windows &amp; RAG — Prework Quiz</title>
<style>
  :root {
    --dark-teal: #00565e;
    --light-teal: #5fbfbf;
    --yellow: #f5c542;
    --yellow-light: #fdf3d7;
    --white: #ffffff;
    --bg: #f4f7f7;
    --text: #1a2a2a;
    --border: #d0dede;
    --green: #27ae60;
    --green-bg: #e8f8ef;
    --red: #e04040;
    --red-bg: #fdecea;
  }
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body { font-family: 'Segoe UI', system-ui, sans-serif; background: var(--bg); color: var(--text); line-height: 1.55; padding: 1.5rem 1rem; }
  .quiz-container { max-width: 740px; margin: 0 auto; }

  header { text-align: center; margin-bottom: 1.5rem; border-bottom: 3px solid var(--yellow); padding-bottom: 1.2rem; }
  header h1 { color: var(--dark-teal); font-size: 1.35rem; font-weight: 700; }
  header p { color: #5a7a7a; font-size: 0.9rem; margin-top: 0.25rem; }

  .progress-bar { display: flex; justify-content: center; gap: 0.5rem; margin-bottom: 0.6rem; flex-wrap: wrap; }
  .dot {
    width: 36px; height: 36px; border-radius: 50%; display: flex; align-items: center; justify-content: center;
    font-size: 0.82rem; font-weight: 700; color: #6a8a8a; background: var(--white); border: 2.5px solid var(--border);
    cursor: pointer; transition: all 0.15s; user-select: none;
  }
  .dot.current { background: var(--light-teal); border-color: var(--light-teal); color: var(--white); box-shadow: 0 0 0 3px rgba(95,191,191,0.3); }
  .dot.answered { border-color: var(--light-teal); color: var(--light-teal); position: relative; }
  .dot.answered::after { content: ''; position: absolute; top: 2px; right: 2px; width: 8px; height: 8px; border-radius: 50%; background: var(--light-teal); }
  .dot.correct { background: var(--green); border-color: var(--green); color: var(--white); }
  .dot.correct::after { display: none; }
  .dot.incorrect { background: var(--red); border-color: var(--red); color: var(--white); }
  .dot.incorrect::after { display: none; }

  .legend { display: flex; justify-content: center; gap: 1.1rem; margin-bottom: 1.2rem; font-size: 0.78rem; color: #6a8a8a; flex-wrap: wrap; }
  .legend span { display: flex; align-items: center; gap: 0.3rem; }
  .legend-dot { width: 12px; height: 12px; border-radius: 50%; display: inline-block; flex-shrink: 0; }

  .top-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; }
  .q-counter { font-size: 0.85rem; font-weight: 600; color: var(--dark-teal); }
  .btn-summary { background: var(--dark-teal); color: var(--white); border: none; padding: 0.5rem 1.1rem; border-radius: 20px; font-size: 0.82rem; font-weight: 600; cursor: pointer; }
  .btn-summary:hover { background: #003d43; }

  .divider { border: none; border-top: 1px solid var(--border); margin-bottom: 1.8rem; }

  .question-card { display: none; }
  .question-card.active { display: block; }
  .q-text { font-size: 1.05rem; font-weight: 500; color: var(--text); margin-bottom: 1.3rem; line-height: 1.5; }

  .options { display: flex; flex-direction: column; gap: 0.6rem; margin-bottom: 1.2rem; }
  .options label {
    display: flex; align-items: center; gap: 0.75rem; padding: 0.85rem 1rem;
    border: 2px solid var(--border); border-radius: 8px; cursor: pointer;
    font-size: 0.95rem; transition: border-color 0.15s, background 0.15s;
  }
  .options label:hover { border-color: var(--light-teal); background: #eaf6f6; }
  .options input[type="radio"] { appearance: none; -webkit-appearance: none; width: 20px; height: 20px; border: 2px solid #b0c8c8; border-radius: 50%; flex-shrink: 0; transition: all 0.12s; position: relative; }
  .options input[type="radio"]:checked { border-color: var(--dark-teal); background: var(--dark-teal); }
  .options input[type="radio"]:checked::after { content: ''; position: absolute; top: 4px; left: 4px; width: 8px; height: 8px; background: var(--white); border-radius: 50%; }

  .options label.correct { border-color: var(--green); background: var(--green-bg); }
  .options label.correct input[type="radio"] { border-color: var(--green); background: var(--green); }
  .options label.incorrect { border-color: var(--red); background: var(--red-bg); }
  .options label.incorrect input[type="radio"] { border-color: var(--red); background: var(--red); }
  .options label.reveal { border-color: var(--green); background: var(--green-bg); }
  .options label.reveal input[type="radio"] { border-color: var(--green); background: var(--green); }
  .options label.disabled { pointer-events: none; opacity: 0.55; }
  .options label.correct.disabled, .options label.incorrect.disabled, .options label.reveal.disabled { opacity: 1; }

  .feedback { display: none; margin-bottom: 1.2rem; border-radius: 8px; overflow: hidden; }
  .feedback.show { display: block; }
  .feedback-banner { padding: 0.6rem 1rem; font-weight: 700; font-size: 0.92rem; display: flex; align-items: center; gap: 0.5rem; }
  .feedback-banner.is-correct { background: var(--green); color: var(--white); }
  .feedback-banner.is-incorrect { background: var(--red); color: var(--white); }
  .feedback-explanation { padding: 0.85rem 1rem; font-size: 0.9rem; line-height: 1.5; }
  .feedback.is-correct .feedback-explanation { background: var(--green-bg); color: #1a3a24; }
  .feedback.is-incorrect .feedback-explanation { background: var(--red-bg); color: #3a1a1a; }

  .btn-row { display: flex; justify-content: space-between; align-items: center; margin-top: 0.5rem; }
  .btn {
    border: none; padding: 0.6rem 1.4rem; border-radius: 20px; font-size: 0.88rem; font-weight: 600;
    cursor: pointer; transition: background 0.15s; display: inline-flex; align-items: center; gap: 0.4rem;
  }
  .btn:disabled { opacity: 0.45; cursor: default; }
  .btn-nav { background: var(--light-teal); color: var(--white); }
  .btn-nav:hover:not(:disabled) { background: #4aadad; }
  .btn-check { background: var(--dark-teal); color: var(--white); }
  .btn-check:hover:not(:disabled) { background: #003d43; }
  .btn-submit { background: var(--yellow); color: var(--dark-teal); font-weight: 700; font-size: 0.95rem; padding: 0.75rem 2rem; }
  .btn-submit:hover { background: #e8b530; }

  .submit-bar { display: none; text-align: center; margin-top: 1.5rem; padding: 1.2rem; background: var(--yellow-light); border: 2px solid var(--yellow); border-radius: 10px; }
  .submit-bar.show { display: block; }
  .submit-bar p { font-size: 0.9rem; color: var(--dark-teal); margin-bottom: 0.8rem; font-weight: 500; }

  .summary-overlay { display: none; position: fixed; inset: 0; background: rgba(0,40,44,0.45); z-index: 100; justify-content: center; align-items: center; }
  .summary-overlay.show { display: flex; }
  .summary-box { background: var(--white); border-radius: 14px; padding: 2rem 2rem 1.6rem; max-width: 440px; width: 90%; text-align: center; box-shadow: 0 8px 30px rgba(0,0,0,0.18); }
  .summary-box h2 { color: var(--dark-teal); margin-bottom: 0.3rem; font-size: 1.25rem; }
  .summary-emoji { font-size: 2.8rem; margin: 0.5rem 0; }
  .summary-box .score-text { font-size: 2.2rem; font-weight: 800; color: var(--dark-teal); margin: 0.3rem 0; }
  .summary-box .score-sub { font-size: 0.95rem; color: #4a6a6a; margin-bottom: 1.2rem; line-height: 1.45; }
  .summary-box .btn { margin: 0.3rem; }
  .btn-close-sum { background: var(--light-teal); color: var(--white); }
  .btn-reset { background: var(--dark-teal); color: var(--white); }

  .completion-code { margin-top: 1rem; padding: 1rem; background: var(--yellow-light); border: 2px dashed var(--yellow); border-radius: 10px; }
  .completion-code p { font-size: 0.85rem; color: var(--dark-teal); margin-bottom: 0.4rem; }
  .completion-code .code { font-size: 1.6rem; font-weight: 800; color: var(--dark-teal); letter-spacing: 0.1em; font-family: 'Courier New', monospace; user-select: all; }
</style>
</head>
<body>
<div class="quiz-container">

<header>
  <h1>Context Windows &amp; RAG — Prework Quiz</h1>
  <p>thegraphcourses.org</p>
</header>

<div class="progress-bar" id="progressBar"></div>

<div class="legend">
  <span><span class="legend-dot" style="background:var(--light-teal);"></span> Current</span>
  <span><span class="legend-dot" style="background:var(--white); border: 2px solid var(--light-teal);"></span> Answered</span>
  <span><span class="legend-dot" style="background:var(--green);"></span> Correct</span>
  <span><span class="legend-dot" style="background:var(--red);"></span> Incorrect</span>
</div>

<div class="top-row">
  <span class="q-counter" id="qCounter">Question 1 of 9</span>
  <button class="btn-summary" id="summaryBtn">Quiz Summary</button>
</div>

<hr class="divider">

<!--
  ============================================================
  HOW TO EDIT QUESTIONS
  ============================================================
  Each question is a <div class="question-card">.

  • Change the question text inside <p class="q-text">.
  • Change option text inside the <span> tags.
  • Set the correct answer with:  data-answer="a", "b", or "c"
    (must match the option's data-option value).
  • Edit the explanation inside the <div class="feedback"> block.

  To ADD a question: copy any question-card block, paste it
  below the last one, and update the text + data-answer.
  The JS handles numbering and navigation automatically.

  To REMOVE a question: delete the entire question-card block.

  COMPLETION CODE: Search for "COMPLETION_CODE" below to change
  the code and the passing threshold.
  ============================================================
-->

<!-- QUESTION 1 -->
<div class="question-card" data-answer="b">
  <p class="q-text">You're having a long conversation with an LLM chatbot and it suddenly seems to "forget" something you told it 30 minutes ago. The most likely explanation is:</p>
  <div class="options">
    <label data-option="a"><input type="radio" value="a"><span>The model hit a technical glitch or server error that caused data loss</span></label>
    <label data-option="b"><input type="radio" value="b"><span>The earlier messages have fallen outside the model's context window</span></label>
    <label data-option="c"><input type="radio" value="c"><span>The model decided that information was no longer relevant</span></label>
  </div>
  <div class="feedback">
    <div class="feedback-banner"></div>
    <div class="feedback-explanation">LLMs have a fixed context window. Once a conversation gets too long, the oldest messages are dropped. This is a built-in limit of how these models work.</div>
  </div>
</div>

<!-- QUESTION 2 -->
<div class="question-card" data-answer="a">
  <p class="q-text">Besides your messages and past responses, which of the following does the model also process in its context window?</p>
  <div class="options">
    <label data-option="a"><input type="radio" value="a"><span>System prompts: hidden instructions that shape the model's behavior</span></label>
    <label data-option="b"><input type="radio" value="b"><span>The full training dataset, re-loaded each time you send a message</span></label>
    <label data-option="c"><input type="radio" value="c"><span>Other users' recent conversations with the same model instance</span></label>
  </div>
  <div class="feedback">
    <div class="feedback-banner"></div>
    <div class="feedback-explanation">The context window typically contains a system prompt, the conversation history, and your latest message. Training data is baked into the model's weights and is not re-read at inference time. Each user's conversation is private.</div>
  </div>
</div>

<!-- QUESTION 3 -->
<div class="question-card" data-answer="b">
  <p class="q-text">You want an AI chatbot to answer questions about your organization's 2,000-page employee handbook. The main limitation would be:</p>
  <div class="options">
    <label data-option="a"><input type="radio" value="a"><span>LLMs cannot process text from PDF files at all</span></label>
    <label data-option="b"><input type="radio" value="b"><span>The handbook won't fit in the context window, and the model may miss details in very long inputs</span></label>
    <label data-option="c"><input type="radio" value="c"><span>The model would need to be fully retrained before it could answer questions about new documents</span></label>
  </div>
  <div class="feedback">
    <div class="feedback-banner"></div>
    <div class="feedback-explanation">Even the largest context windows would struggle with 2,000 pages. Research also shows that models pay less attention to information in the middle of very long inputs (the "lost in the middle" problem).</div>
  </div>
</div>

<!-- QUESTION 4 -->
<div class="question-card" data-answer="b">
  <p class="q-text">Your policy documents are far too large to paste into every prompt. The standard solution for giving a chatbot access to this kind of large knowledge base is:</p>
  <div class="options">
    <label data-option="a"><input type="radio" value="a"><span>Training a brand-new LLM from scratch on your documents so the knowledge lives in the model's weights</span></label>
    <label data-option="b"><input type="radio" value="b"><span>Using RAG to find and include only the relevant sections in each prompt</span></label>
    <label data-option="c"><input type="radio" value="c"><span>Having the model memorize the documents over several long conversations</span></label>
  </div>
  <div class="feedback">
    <div class="feedback-banner"></div>
    <div class="feedback-explanation">RAG (Retrieval Augmented Generation) retrieves only the most relevant chunks and passes them with the user's question. Training a new LLM would be extremely expensive, and models cannot memorize across conversations.</div>
  </div>
</div>

<!-- QUESTION 5 -->
<div class="question-card" data-answer="b">
  <p class="q-text">When a conversation exceeds the context window and the model loses earlier messages, the model will typically:</p>
  <div class="options">
    <label data-option="a"><input type="radio" value="a"><span>Warn you that it has lost earlier context and may not answer accurately</span></label>
    <label data-option="b"><input type="radio" value="b"><span>Keep responding without warning, potentially hallucinating to fill gaps</span></label>
    <label data-option="c"><input type="radio" value="c"><span>Stop responding entirely until you start a new conversation</span></label>
  </div>
  <div class="feedback">
    <div class="feedback-banner"></div>
    <div class="feedback-explanation">Models don't know what they've lost. They will try to continue coherently with whatever context remains, which can lead to fabricated information. They won't warn you.</div>
  </div>
</div>

<!-- QUESTION 6 -->
<div class="question-card" data-answer="a">
  <p class="q-text">Which of the following is a practical strategy for staying within a model's context window during a long working session?</p>
  <div class="options">
    <label data-option="a"><input type="radio" value="a"><span>Start a new conversation when switching topics</span></label>
    <label data-option="b"><input type="radio" value="b"><span>Use shorter words and abbreviations to reduce the token count</span></label>
    <label data-option="c"><input type="radio" value="c"><span>No strategy is needed; all modern LLMs have unlimited context</span></label>
  </div>
  <div class="feedback">
    <div class="feedback-banner"></div>
    <div class="feedback-explanation">Starting fresh conversations for new topics keeps the context focused and avoids wasting tokens on unrelated exchanges. Shorter words don't help meaningfully, and no model has truly unlimited context.</div>
  </div>
</div>

<!-- QUESTION 7 -->
<div class="question-card" data-answer="b">
  <p class="q-text">In a basic RAG system, the data you want the model to reference needs to be:</p>
  <div class="options">
    <label data-option="a"><input type="radio" value="a"><span>Added to the model's training data through a fine-tuning process that permanently changes the model</span></label>
    <label data-option="b"><input type="radio" value="b"><span>Split into chunks and stored in a searchable database</span></label>
    <label data-option="c"><input type="radio" value="c"><span>Memorized by the model during conversation through gradient re-normalization</span></label>
  </div>
  <div class="feedback">
    <div class="feedback-banner"></div>
    <div class="feedback-explanation">RAG splits documents into chunks, stores them in a searchable database (often a vector store), and retrieves the most relevant chunks at query time. The model stays unchanged throughout. ("Gradient re-normalization" is a made-up term.)</div>
  </div>
</div>

<!-- QUESTION 8 -->
<div class="question-card" data-answer="a">
  <p class="q-text">A colleague suggests fine-tuning the LLM on your company's documents instead of using RAG. What is the main drawback of that approach?</p>
  <div class="options">
    <label data-option="a"><input type="radio" value="a"><span>Fine-tuning is expensive, and the model must be retrained every time a document changes</span></label>
    <label data-option="b"><input type="radio" value="b"><span>Fine-tuning erases everything the model previously knew, so it can only answer questions about your documents</span></label>
    <label data-option="c"><input type="radio" value="c"><span>Fine-tuning only works for image models, not for text-based LLMs</span></label>
  </div>
  <div class="feedback">
    <div class="feedback-banner"></div>
    <div class="feedback-explanation">Fine-tuning is costly and creates a static snapshot. If your documents change (as policies often do), you'd need to retrain. RAG avoids this by keeping documents in an external database that can be updated at any time, without touching the model.</div>
  </div>
</div>

<!-- QUESTION 9 -->
<div class="question-card" data-answer="b">
  <p class="q-text">In a RAG system, something needs to find the right document chunks for each question. One approach uses AI to understand the meaning of your query. What is another valid approach?</p>
  <div class="options">
    <label data-option="a"><input type="radio" value="a"><span>Recursive token backpropagation across the document index</span></label>
    <label data-option="b"><input type="radio" value="b"><span>Keyword matching, which finds chunks that contain the same words as the query</span></label>
    <label data-option="c"><input type="radio" value="c"><span>Latent frequency decomposition of the query matrix</span></label>
  </div>
  <div class="feedback">
    <div class="feedback-banner"></div>
    <div class="feedback-explanation">Keyword matching finds documents containing the same terms as your question. It's simple and widely used. Many RAG systems combine keyword matching with AI-powered search for best results. The other two options are made-up terms.</div>
  </div>
</div>

<!-- Submit bar -->
<div class="submit-bar" id="submitBar">
  <p>You've reached the end of the quiz!</p>
  <button class="btn btn-submit" id="submitBtn">See My Results</button>
</div>

<!-- Summary Overlay -->
<div class="summary-overlay" id="summaryOverlay">
  <div class="summary-box">
    <h2>Quiz Complete!</h2>
    <div class="summary-emoji" id="summaryEmoji"></div>
    <div class="score-text" id="scoreText">--</div>
    <div class="score-sub" id="scoreSub"></div>
    <div class="completion-code" id="completionCode" style="display:none;">
      <p>Enter this code in your LMS to mark the lesson complete:</p>
      <div class="code" id="codeValue"></div>
    </div>
    <div style="margin-top:1rem;">
      <button class="btn btn-close-sum" id="closeSum">Back to Quiz</button>
      <button class="btn btn-reset" id="resetBtn">Try Again</button>
    </div>
  </div>
</div>

</div>

<script>
(function () {
  /* ============================================================
     COMPLETION_CODE: Change the code and threshold here.
     ============================================================ */
  var COMPLETION_CODE = 'IMAGES67';
  var PASS_THRESHOLD  = 0.8; /* 80% */

  var cards   = Array.prototype.slice.call(document.querySelectorAll('.question-card'));
  var total   = cards.length;
  var current = 0;
  var state   = [];

  cards.forEach(function (card, i) {
    state.push({ picked: null, checked: false, correct: false });
    card.querySelectorAll('input[type="radio"]').forEach(function (r) {
      r.name = 'q' + i;
      r.addEventListener('change', function () {
        state[i].picked = r.value;
        updateDots();
        if (i === current && !state[i].checked) checkBtn.disabled = false;
      });
    });
  });

  var bar = document.getElementById('progressBar');
  cards.forEach(function (_, i) {
    var d = document.createElement('div');
    d.className = 'dot';
    d.textContent = i + 1;
    d.addEventListener('click', function () { goTo(i); });
    bar.appendChild(d);
  });

  var btnRow   = document.createElement('div'); btnRow.className = 'btn-row';
  var prevBtn  = document.createElement('button'); prevBtn.className = 'btn btn-nav'; prevBtn.textContent = '\u2B05 Previous';
  var nextBtn  = document.createElement('button'); nextBtn.className = 'btn btn-nav'; nextBtn.textContent = 'Next Question \u27A1';
  var checkBtn = document.createElement('button'); checkBtn.className = 'btn btn-check'; checkBtn.textContent = 'Check \uD83D\uDD0D';
  prevBtn.addEventListener('click', function () { goTo(current - 1); });
  nextBtn.addEventListener('click', function () { goTo(current + 1); });
  checkBtn.addEventListener('click', function () { checkAnswer(current); });

  var qCounter  = document.getElementById('qCounter');
  var submitBar = document.getElementById('submitBar');

  function goTo(i) {
    if (i < 0 || i >= total) return;
    cards[current].classList.remove('active');
    current = i;
    cards[current].classList.add('active');
    render();
  }

  function render() {
    if (btnRow.parentNode) btnRow.parentNode.removeChild(btnRow);
    btnRow.innerHTML = '';
    qCounter.textContent = 'Question ' + (current + 1) + ' of ' + total;

    if (current > 0) btnRow.appendChild(prevBtn);
    else btnRow.appendChild(document.createElement('div'));

    var rightGroup = document.createElement('div');
    rightGroup.style.cssText = 'display:flex; gap:0.5rem;';

    if (!state[current].checked) {
      checkBtn.disabled = !state[current].picked;
      rightGroup.appendChild(checkBtn);
    }

    if (current < total - 1) {
      rightGroup.appendChild(nextBtn);
    }

    btnRow.appendChild(rightGroup);
    cards[current].appendChild(btnRow);

    submitBar.classList.toggle('show', current === total - 1);
    updateDots();
  }

  function checkAnswer(i) {
    var card = cards[i], answer = card.getAttribute('data-answer'), picked = state[i].picked;
    if (!picked) return;
    state[i].checked = true;
    state[i].correct = (picked === answer);

    card.querySelectorAll('label').forEach(function (label) {
      var opt = label.getAttribute('data-option');
      label.classList.add('disabled');
      if (opt === answer)       label.classList.add(picked === answer ? 'correct' : 'reveal');
      else if (opt === picked)  label.classList.add('incorrect');
    });

    var fb     = card.querySelector('.feedback');
    var banner = card.querySelector('.feedback-banner');
    var isRight = state[i].correct;

    fb.classList.add('show', isRight ? 'is-correct' : 'is-incorrect');
    banner.classList.add(isRight ? 'is-correct' : 'is-incorrect');
    banner.textContent = isRight ? '\u2705  Correct!' : '\u274C  Incorrect';

    render();
  }

  function updateDots() {
    var dots = bar.querySelectorAll('.dot');
    dots.forEach(function (d, i) {
      d.className = 'dot';
      if (i === current)                               d.classList.add('current');
      else if (state[i].checked && state[i].correct)   d.classList.add('correct');
      else if (state[i].checked && !state[i].correct)  d.classList.add('incorrect');
      else if (state[i].picked)                        d.classList.add('answered');
    });
  }

  var overlay        = document.getElementById('summaryOverlay');
  var completionCode = document.getElementById('completionCode');
  var codeValue      = document.getElementById('codeValue');

  function showSummary() {
    cards.forEach(function (card, i) {
      if (!state[i].checked && state[i].picked) checkAnswer(i);
    });

    var done  = state.filter(function (s) { return s.checked; }).length;
    var right = state.filter(function (s) { return s.correct; }).length;
    var pct   = done > 0 ? right / total : 0;

    document.getElementById('scoreText').textContent = done === 0 ? '--' : right + ' / ' + total;

    var emoji, msg;
    if (done === 0) {
      emoji = '\uD83E\uDD14'; msg = 'No questions answered yet \u2014 give it a go!';
    } else if (pct === 1) {
      emoji = '\uD83C\uDF89'; msg = 'Perfect score \u2014 outstanding work! You clearly understand context windows and RAG.';
    } else if (pct >= 0.8) {
      emoji = '\uD83C\uDF1F'; msg = 'Excellent! You have a strong grasp of the material. Review the ones you missed and you\'ll be all set.';
    } else if (pct >= 0.5) {
      emoji = '\uD83D\uDCAA'; msg = 'Good effort! You\'re building a solid foundation. Review the explanations to strengthen your understanding.';
    } else {
      emoji = '\uD83D\uDCDA'; msg = 'Great start! The prework material will help fill in the gaps. Don\'t worry \u2014 that\'s exactly what this quiz is for.';
    }

    document.getElementById('summaryEmoji').textContent = emoji;
    document.getElementById('scoreSub').textContent = msg;

    if (pct >= PASS_THRESHOLD && done > 0) {
      codeValue.textContent = COMPLETION_CODE;
      completionCode.style.display = 'block';
    } else {
      completionCode.style.display = 'none';
    }

    overlay.classList.add('show');
  }

  document.getElementById('summaryBtn').addEventListener('click', showSummary);
  document.getElementById('submitBtn').addEventListener('click', showSummary);
  document.getElementById('closeSum').addEventListener('click', function () { overlay.classList.remove('show'); });
  overlay.addEventListener('click', function (e) { if (e.target === overlay) overlay.classList.remove('show'); });

  document.getElementById('resetBtn').addEventListener('click', function () {
    overlay.classList.remove('show');
    cards.forEach(function (card, i) {
      state[i] = { picked: null, checked: false, correct: false };
      card.querySelectorAll('label').forEach(function (l) {
        l.className = ''; l.setAttribute('data-option', l.getAttribute('data-option'));
      });
      card.querySelectorAll('input[type="radio"]').forEach(function (r) { r.checked = false; });
      var fb = card.querySelector('.feedback');
      fb.className = 'feedback';
      fb.querySelector('.feedback-banner').className = 'feedback-banner';
      fb.querySelector('.feedback-banner').textContent = '';
      card.classList.remove('active');
    });
    current = 0;
    cards[0].classList.add('active');
    render();
    window.scrollTo({ top: 0, behavior: 'smooth' });
  });

  cards[0].classList.add('active');
  render();
})();
</script>
</body>
</html>
